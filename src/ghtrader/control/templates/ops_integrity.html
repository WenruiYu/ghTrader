{% extends "base.html" %}
{% block content %}
  <h2>Integrity</h2>

  <div class="card">
    <h3>audit</h3>
    <form class="form" method="post" action="/ops/integrity/audit{{ token_qs }}">
      <div class="grid2">
        <div><label>Scopes</label>
          <select name="scopes" multiple size="5">
            <option value="all" selected>all</option>
            <option value="ticks">ticks</option>
            <option value="main_l5">main_l5</option>
            <option value="features">features</option>
            <option value="labels">labels</option>
          </select>
        </div>
        <div>
          <label>Data dir</label><input name="data_dir" value="data"/>
          <label>Runs dir</label><input name="runs_dir" value="runs"/>
          <label>Lake version</label>
          <select name="lake_version"><option value="v1" selected>v1</option><option value="v2">v2</option></select>
        </div>
      </div>
      <button type="submit">Run audit</button>
    </form>
  </div>

  <div class="card">
    <h3>Recent audit reports</h3>
    {% if reports and reports|length > 0 %}
      <ul>
        {% for r in reports %}
          <li><a href="/ops/integrity/report/{{ r }}{{ token_qs }}">{{ r }}</a></li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="muted">No reports found under runs/audit/</p>
    {% endif %}
  </div>
{% endblock %}

