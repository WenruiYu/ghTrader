{% extends "base.html" %}

{% block content %}
<div class="page">
  <div class="section-header mb-2">
    <h2 class="mb-0">Data Hub</h2>
    <div class="muted text-sm">Main schedule â†’ main_l5 only</div>
  </div>

  <div class="card mb-3">
    <h3 class="mb-2">Build Schedule</h3>
    <p class="muted text-sm mb-2">Use TqSdk KQ.m@ mapping to generate the daily main contract schedule.</p>
    <form class="form" method="post" action="/data/build/main_schedule{{ token_qs }}">
      <div class="grid3">
        <div><label>Variety</label><input name="variety" value="cu"/></div>
        <div><label>Start date</label><input name="start_date" value="{{ default_schedule_start }}"/></div>
        <div><label>End date</label><input name="end_date" value="{{ default_schedule_end }}"/></div>
      </div>
      <div class="grid2">
        <div><label>Data dir</label><input name="data_dir" value="data"/></div>
      </div>
      <button type="submit">Build Schedule</button>
    </form>
  </div>

  <div class="card">
    <h3 class="mb-2">Build main_l5</h3>
    <p class="muted text-sm mb-2">Download per-day L5 from the schedule and write `main_l5` in QuestDB.</p>
    <form class="form" method="post" action="/data/build/main_l5{{ token_qs }}">
      <div class="grid2">
        <div><label>Variety</label><input name="variety" value="cu"/></div>
        <div><label>Derived symbol</label><input name="derived_symbol" value="KQ.m@SHFE.cu"/></div>
      </div>
      <div class="grid2">
        <div><label>Data dir</label><input name="data_dir" value="data"/></div>
      </div>
      <button type="submit">Build main_l5</button>
    </form>
  </div>
</div>
{% endblock %}
